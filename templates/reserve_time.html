{% extends 'base.html' %}
{% block title %} Welcome title {% endblock %}

{% block head %}
{{ super() }}
<!-- No need to include the Bootstrap CSS again, as it's included in the base.html -->
<link rel="stylesheet" href="{{ url_for('static', filename='staff_styles.css') }}">
{% endblock %}

{% block content %}


<div class="container">
  {% if selected_service %}
  <div class="row">
    <div class="col-sm-2 col-md-2 col-lg-2 p-1 align-items-top"><img src="{{ selected_service.image }}"></div>
    <div class="col-sm-auto col-md-auto col-lg-auto p-1">
      <div class="h4 font-weight-normal">
        Staff : {{ selected_staff.staff_name }}<br />
        Service: {{ selected_service.service_name }}<br />
        Price: {{ selected_service.price }} <br />
        Time in Minutes: {{ selected_service.time_in_minutes }}<br />
      </div>
    </div>
  </div>

  {% endif %}

 
  
  
</div>

<p class="h3">Select reserve appoitment</p>

{% if time_slots %}
<div class="accordion" id="days">
  <div class="row text-center">
    {% for item in time_slots %}
    <div class="col-md-4 col-lg-3">
      <div class="accordion-item bgday">
        <h2 class="accordion-header bgday">
          <a class="btn accordion-button bgday;" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-{{ item.day }}"
            aria-expanded="true" aria-controls="collapse-{{ item.day }}">
            {{ item.day }}
          </a>
        </h2>
        <div id="collapse-{{ item.day }}" class="accordion-collapse collapse" data-bs-parent="#days">
          <div class="accordion-body">
            {% for timeslot in item.reserve_time %}
              {% if timeslot.taken %}
                <div class=" h5 m-2 p-2 text-muted"> 
                  {{ timeslot.from }} - {{ timeslot.to }}
                </div>
              {% else %}
                <div class=" h5 m-2 p-2 "> 
                  {{ timeslot.from }} - {{ timeslot.to }}
                </div>
              {% endif %}
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endif %}


<div class="row m-4 ">
  <div class="col-md-6 text-right ">
    <a href="#" class="btn btn-outline-secondary my-2 my-sm-0 ">Book as a guest</a>
  </div>
  <div class="col-md-6 ">
    <a href="#" class="btn btn-outline-secondary my-2 my-sm-0">Book as a member</a>
  </div>

</div>


<script>
var slotId = NaN
function hilightReserveTime(element) {

  var elements = document.getElementsByClassName('timeslot');
  for (var i = 0; i < elements.length; i++) {
    elements[i].classList.remove('bg-success');
    elements[i].classList.add('border', 'border-success');
  }
  // Add 'bg-success' class to the clicked element
  document.getElementById(element.id).classList.add('bg-success');

  document.getElementById("BookAsGuest").disabled = false;
  // ** Enable for next sprint
  //document.getElementById("BookAsMember").disabled = false;
  slotId = element.id
}


function redirectToConfirmation(bookType) {
  if (slotId != NaN && (bookType == 'guest' || bookType == 'member')) {
    const confirmationUrl = `/confirmation/${bookType}/${slotId}`; 
    window.location.href = confirmationUrl;
  } else {
    alert("Choose resevation time!!")
  }
}
</script>
{% endblock %}